(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))h(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&h(r)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function h(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();class S{constructor(t,e,h,i,s){this.x=t,this.y=e,this.vx=h,this.vy=i,this.ctx=s,this.trail=[],this.maxTrail=40,this.maxSpeed=3,this.minSpeed=2}draw(){for(let e=0;e<this.trail.length-1;e=e+5){const h=this.trail[e].x,i=this.trail[e].y;this.ctx.beginPath(),this.ctx.arc(h,i,7,0,2*Math.PI,!1),this.ctx.fillStyle=`rgba(255, 255, 255, ${.3*(e/this.maxTrail)})`,this.ctx.fill()}this.ctx.save(),this.ctx.translate(this.x,this.y);const t=Math.atan2(this.vy,this.vx);this.ctx.rotate(t),this.ctx.beginPath(),this.ctx.moveTo(10,0),this.ctx.lineTo(-15,10),this.ctx.lineTo(-10,0),this.ctx.lineTo(-15,-10),this.ctx.closePath(),this.ctx.fillStyle="#fff",this.ctx.fill(),this.ctx.restore()}move(){const e=Math.sqrt(this.vx*this.vx+this.vy*this.vy),h=this.x-this.vx/e*15,i=this.y-this.vy/e*15;this.trail.push({x:h,y:i}),this.trail.length>this.maxTrail&&this.trail.shift();const s=Math.sqrt(this.vx*this.vx+this.vy*this.vy);s<this.minSpeed&&(this.vx=this.vx/s*this.minSpeed,this.vy=this.vy/s*this.minSpeed),s>this.maxSpeed&&(this.vx=this.vx/s*this.maxSpeed,this.vy=this.vy/s*this.maxSpeed),(this.x>=window.innerWidth||this.x<=0||this.y>=window.innerHeight||this.y<=0)&&(this.vx=-this.vx,this.vy=-this.vy),this.x+=this.vx,this.y+=this.vy,this.draw()}}class R{constructor(t){this.boids=t,this.avoidFactor=.005,this.protectedRange=25,this.visibleRange=150,this.matchingFactor=.05,this.centeringFactor=.001,this.turnFactor=.08}algorithm(){this.boids.forEach(t=>{let e=0,h=0,i=0,s=0,r=0,x=0,a=0;this.boids.filter(n=>n!=t).forEach(n=>{let v=t.x-n.x,y=t.y-n.y;if(Math.abs(v)<this.protectedRange&&Math.abs(y)<this.protectedRange){const u=v*v+y*y;u<this.protectedRange*this.protectedRange?(e+=t.x-n.x,h+=t.y-n.y):u<this.visibleRange*this.visibleRange&&(i+=n.x,s+=n.y,r+=n.vx,x+=n.vy,a++)}}),a>0&&(i=i/a,s=s/a,r=r/a,x=x/a,t.vx=t.vx+(i-t.x)*this.centeringFactor+(r-t.vx)*this.matchingFactor,t.vy=t.vy+(s-t.y)*this.centeringFactor+(x-t.vy)*this.matchingFactor),t.vx+=e*this.avoidFactor,t.vy+=h*this.avoidFactor;const d=300,g=400;t.y<d&&(t.vy+=this.turnFactor),t.x>window.innerWidth-g&&(t.vx-=this.turnFactor),t.x<g&&(t.vx+=this.turnFactor),t.y>window.innerHeight-d&&(t.vy-=this.turnFactor)})}move(){this.algorithm(),this.boids.forEach(t=>{t.move()})}}const m=document.getElementById("boids-canvas"),o=window.innerWidth,l=window.innerHeight;m.width=o;m.height=l;const p=m.getContext("2d",{alpha:!1}),f=document.createElement("canvas");f.width=o;f.height=l;const w=f.getContext("2d",{alpha:!1}),P=300,F=[];for(let c=0;c<P;c++)F.push(new S(Math.random()*o,Math.random()*l,Math.random()-.5,Math.random()-.5,w));const T=new R(F);function M(){w.clearRect(0,0,o,l),T.move(),p.clearRect(0,0,o,l),p.drawImage(f,0,0),requestAnimationFrame(M)}M();
